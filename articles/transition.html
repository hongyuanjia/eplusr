<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Update IDF version • eplusr</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><!-- docsearch --><script src="../docsearch.js"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.3/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous">
<link href="../docsearch.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script><meta property="og:title" content="Update IDF version">
<meta property="og:description" content="eplusr">
<meta property="og:image" content="https://hongyuanjia.github.io/eplusr/logo.svg">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-141601756-1"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-141601756-1');
</script>
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">eplusr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.13.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/eplusr.html">Get started</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Vignettes
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/eplusr.html">Introduction to eplusr</a>
    </li>
    <li>
      <a href="../articles/job.html">Run simulation and data exploration</a>
    </li>
    <li>
      <a href="../articles/param.html">Parametric simulations</a>
    </li>
    <li>
      <a href="../articles/transition.html">Update IDF version</a>
    </li>
    <li>
      <a href="../articles/epw.html">Work with weather files</a>
    </li>
    <li>
      <a href="../articles/schedule.html">Work with `Schedule:Compact` objects</a>
    </li>
    <li>
      <a href="../articles/geom.html">Work with geometries</a>
    </li>
    <li>
      <a href="../articles/faq.html">Frequently asked questions</a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">Manual</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/hongyuanjia/eplusr">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
<form class="navbar-form navbar-right hidden-xs hidden-sm" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
</div>
      </form>
      
    </div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="transition_files/accessible-code-block-0.0.1/empty-anchor.js"></script><link href="transition_files/anchor-sections-1.0/anchor-sections.css" rel="stylesheet">
<script src="transition_files/anchor-sections-1.0/anchor-sections.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Update IDF version</h1>
                        <h4 class="author">Hongyuan Jia</h4>
            
            <h4 class="date">2020-11-15</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/hongyuanjia/eplusr/blob/master/vignettes/transition.Rmd"><code>vignettes/transition.Rmd</code></a></small>
      <div class="hidden name"><code>transition.Rmd</code></div>

    </div>

    
    
<div id="motivation" class="section level1">
<h1 class="hasAnchor">
<a href="#motivation" class="anchor"></a>Motivation</h1>
<p>EnergyPlus provides a preprocessor call <strong>IDFVersionUpdater</strong> to update IDF to the latest version. It is written in Fortran and the program itself evolves along with EnergyPlus. Once a new version of EnergyPlus is published, IDFVersionUpdater will add the support of that version.</p>
<p>The original IDFVersionUpdater program is a GUI program and does not provide command line interface. This makes it hard to update lots of IDF files programmatically. The good news is that IDFVersionUpdater itself is a wrapper to call different standalone transition programs for each single version update. For example, when updating your model from EnergyPlus v8.7 to v8.9, <code>Transition-V8-7-0-to-V8-8-0</code> will be called, and then <code>Transition-V8-8-0-to-V8-9-0</code>.</p>
</div>
<div id="introduce-version_updater" class="section level1">
<h1 class="hasAnchor">
<a href="#introduce-version_updater" class="anchor"></a>Introduce <code>version_updater()</code>
</h1>
<p><a href="https://hongyuanjia.github.io/eplusr/reference/version_updater.html"><code>version_updater()</code></a> is <a href="https://hongyuanjia.github.io/eplusr/index.html">eplusr</a>’s version of IDFVersionUpdater. <code><a href="../reference/version_updater.html">version_updater()</a></code> itself is not complicated. Compared to IDFVersionUpdater, <code><a href="../reference/version_updater.html">version_updater()</a></code> has some improvements:</p>
<ul>
<li><p>IDFVersionUpdater in EnergyPlus v9.0 (both v9.0.0 and v9.01) fails to translate <code>FenesreationSurface:Detailed</code> objects. <code><a href="../reference/version_updater.html">version_updater()</a></code> will try to use the transition programs that come from the latest EnergyPlus installed on your computer, but will skip v9.0 if possible.</p></li>
<li><p>Like IDFVersionUpdater, <code><a href="../reference/version_updater.html">version_updater()</a></code> also renames all output file with suffix <code>VXY0</code>, where <code>X</code> and <code>Y</code> indicates the major and minor version of input IDF file. However, <code><a href="../reference/version_updater.html">version_updater()</a></code> always keep the original input file untouched and save a copy and rename it in the same pattern.</p></li>
<li><p>All messages generated from each transition program are parsed, stored in a list and saved as an attributes named <code>errors</code>. So that you can easily extract all messages by <code><a href="https://rdrr.io/r/base/attr.html">attr(results, "errors")</a></code>. The error messages are parsed and stored as <a href="http://r-datatable.com"><code>data.table</code>s</a> which make it easy for post-processing.</p></li>
<li><p>A <code>dir</code> argument can be given to further specify where the updated models to be saved.</p></li>
</ul>
<p>Unfortunately, even though the transition programs are written in Fortran, it could still take several minutes to complete the update process</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">path</span> <span class="op">&lt;-</span> <span class="st">"RefBldgLargeOfficeNew2004_Chicago.idf"</span>
<span class="fu"><a href="../reference/read_idf.html">read_idf</a></span><span class="op">(</span><span class="va">path</span><span class="op">)</span><span class="op">$</span><span class="fu">version</span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt; IDD v8.2.0 has not been parsed before.</span>
<span class="co">#&gt; Try to locate 'Energy+.idd' in EnergyPlus v8.2.0 installation folder '/usr/local/EnergyPlus-8-2-0'.</span>
<span class="co">#&gt; Failed to locate 'Energy+.idd' because EnergyPlus v8.2.0 is not available.</span>
<span class="co">#&gt; Try to locate 'V8-2-0-Energy+.idd' in EnergyPlus v9.2.0 IDFVersionUpdater folder '/usr/local/EnergyPlus-9-2-0/PreProcess/IDFVersionUpdater'. --&gt; Succeeded</span>
<span class="co">#&gt; IDD file found: '/usr/local/EnergyPlus-9-2-0/PreProcess/IDFVersionUpdater/V8-2-0-Energy+.idd'.</span>
<span class="co">#&gt; Start parsing...</span>
<span class="co">#&gt; Parsing completed.</span>
<span class="co">#&gt; [1] '8.2.0'</span>

<span class="op">(</span><span class="va">t_vu</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.time.html">system.time</a></span><span class="op">(</span><span class="va">verup</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/version_updater.html">version_updater</a></span><span class="op">(</span><span class="va">path</span>, <span class="fl">9.2</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; IDFVersionUpdater: /usr/local/EnergyPlus-9-2-0/PreProcess/IDFVersionUpdater</span>
<span class="co">#&gt; Input file: /home/runner/work/eplusr/eplusr/vignettes/RefBldgLargeOfficeNew2004_ChicagoV820.idf</span>
<span class="co">#&gt;  From  Ver: 8.2.0</span>
<span class="co">#&gt; Toward Ver: 8.3.0</span>
<span class="co">#&gt; [8.2.0 --&gt; 8.3.0] SUCCEEDED.</span>
<span class="co">#&gt; IDD v8.3.0 has not been parsed before.</span>
<span class="co">#&gt; Try to locate 'Energy+.idd' in EnergyPlus v8.3.0 installation folder '/usr/local/EnergyPlus-8-3-0'.</span>
<span class="co">#&gt; Failed to locate 'Energy+.idd' because EnergyPlus v8.3.0 is not available.</span>
<span class="co">#&gt; Try to locate 'V8-3-0-Energy+.idd' in EnergyPlus v9.2.0 IDFVersionUpdater folder '/usr/local/EnergyPlus-9-2-0/PreProcess/IDFVersionUpdater'. --&gt; Succeeded</span>
<span class="co">#&gt; IDD file found: '/usr/local/EnergyPlus-9-2-0/PreProcess/IDFVersionUpdater/V8-3-0-Energy+.idd'.</span>
<span class="co">#&gt; Start parsing...</span>
<span class="co">#&gt; Parsing completed.</span>
<span class="co">#&gt; Input file: /home/runner/work/eplusr/eplusr/vignettes/RefBldgLargeOfficeNew2004_ChicagoV830.idf</span>
<span class="co">#&gt;  From  Ver: 8.3.0</span>
<span class="co">#&gt; Toward Ver: 8.4.0</span>
<span class="co">#&gt; [8.3.0 --&gt; 8.4.0] SUCCEEDED.</span>
<span class="co">#&gt; IDD v8.4.0 has not been parsed before.</span>
<span class="co">#&gt; Try to locate 'Energy+.idd' in EnergyPlus v8.4.0 installation folder '/usr/local/EnergyPlus-8-4-0'.</span>
<span class="co">#&gt; Failed to locate 'Energy+.idd' because EnergyPlus v8.4.0 is not available.</span>
<span class="co">#&gt; Try to locate 'V8-4-0-Energy+.idd' in EnergyPlus v9.2.0 IDFVersionUpdater folder '/usr/local/EnergyPlus-9-2-0/PreProcess/IDFVersionUpdater'. --&gt; Succeeded</span>
<span class="co">#&gt; IDD file found: '/usr/local/EnergyPlus-9-2-0/PreProcess/IDFVersionUpdater/V8-4-0-Energy+.idd'.</span>
<span class="co">#&gt; Start parsing...</span>
<span class="co">#&gt; Parsing completed.</span>
<span class="co">#&gt; Input file: /home/runner/work/eplusr/eplusr/vignettes/RefBldgLargeOfficeNew2004_ChicagoV840.idf</span>
<span class="co">#&gt;  From  Ver: 8.4.0</span>
<span class="co">#&gt; Toward Ver: 8.5.0</span>
<span class="co">#&gt; [8.4.0 --&gt; 8.5.0] SUCCEEDED.</span>
<span class="co">#&gt; IDD v8.5.0 has not been parsed before.</span>
<span class="co">#&gt; Try to locate 'Energy+.idd' in EnergyPlus v8.5.0 installation folder '/usr/local/EnergyPlus-8-5-0'.</span>
<span class="co">#&gt; Failed to locate 'Energy+.idd' because EnergyPlus v8.5.0 is not available.</span>
<span class="co">#&gt; Try to locate 'V8-5-0-Energy+.idd' in EnergyPlus v9.2.0 IDFVersionUpdater folder '/usr/local/EnergyPlus-9-2-0/PreProcess/IDFVersionUpdater'. --&gt; Succeeded</span>
<span class="co">#&gt; IDD file found: '/usr/local/EnergyPlus-9-2-0/PreProcess/IDFVersionUpdater/V8-5-0-Energy+.idd'.</span>
<span class="co">#&gt; Start parsing...</span>
<span class="co">#&gt; Parsing completed.</span>
<span class="co">#&gt; Input file: /home/runner/work/eplusr/eplusr/vignettes/RefBldgLargeOfficeNew2004_ChicagoV850.idf</span>
<span class="co">#&gt;  From  Ver: 8.5.0</span>
<span class="co">#&gt; Toward Ver: 8.6.0</span>
<span class="co">#&gt; [8.5.0 --&gt; 8.6.0] SUCCEEDED.</span>
<span class="co">#&gt; IDD v8.6.0 has not been parsed before.</span>
<span class="co">#&gt; Try to locate 'Energy+.idd' in EnergyPlus v8.6.0 installation folder '/usr/local/EnergyPlus-8-6-0'.</span>
<span class="co">#&gt; Failed to locate 'Energy+.idd' because EnergyPlus v8.6.0 is not available.</span>
<span class="co">#&gt; Try to locate 'V8-6-0-Energy+.idd' in EnergyPlus v9.2.0 IDFVersionUpdater folder '/usr/local/EnergyPlus-9-2-0/PreProcess/IDFVersionUpdater'. --&gt; Succeeded</span>
<span class="co">#&gt; IDD file found: '/usr/local/EnergyPlus-9-2-0/PreProcess/IDFVersionUpdater/V8-6-0-Energy+.idd'.</span>
<span class="co">#&gt; Start parsing...</span>
<span class="co">#&gt; Parsing completed.</span>
<span class="co">#&gt; Input file: /home/runner/work/eplusr/eplusr/vignettes/RefBldgLargeOfficeNew2004_ChicagoV860.idf</span>
<span class="co">#&gt;  From  Ver: 8.6.0</span>
<span class="co">#&gt; Toward Ver: 8.7.0</span>
<span class="co">#&gt; [8.6.0 --&gt; 8.7.0] SUCCEEDED.</span>
<span class="co">#&gt; IDD v8.7.0 has not been parsed before.</span>
<span class="co">#&gt; Try to locate 'Energy+.idd' in EnergyPlus v8.7.0 installation folder '/usr/local/EnergyPlus-8-7-0'.</span>
<span class="co">#&gt; Failed to locate 'Energy+.idd' because EnergyPlus v8.7.0 is not available.</span>
<span class="co">#&gt; Try to locate 'V8-7-0-Energy+.idd' in EnergyPlus v9.2.0 IDFVersionUpdater folder '/usr/local/EnergyPlus-9-2-0/PreProcess/IDFVersionUpdater'. --&gt; Succeeded</span>
<span class="co">#&gt; IDD file found: '/usr/local/EnergyPlus-9-2-0/PreProcess/IDFVersionUpdater/V8-7-0-Energy+.idd'.</span>
<span class="co">#&gt; Start parsing...</span>
<span class="co">#&gt; Parsing completed.</span>
<span class="co">#&gt; Input file: /home/runner/work/eplusr/eplusr/vignettes/RefBldgLargeOfficeNew2004_ChicagoV870.idf</span>
<span class="co">#&gt;  From  Ver: 8.7.0</span>
<span class="co">#&gt; Toward Ver: 8.8.0</span>
<span class="co">#&gt; [8.7.0 --&gt; 8.8.0] SUCCEEDED.</span>
<span class="co">#&gt; IDD v8.8.0 has not been parsed before.</span>
<span class="co">#&gt; Try to locate 'Energy+.idd' in EnergyPlus v8.8.0 installation folder '/usr/local/EnergyPlus-8-8-0'.</span>
<span class="co">#&gt; IDD file found: '/usr/local/EnergyPlus-8-8-0/Energy+.idd'.</span>
<span class="co">#&gt; Start parsing...</span>
<span class="co">#&gt; Parsing completed.</span>
<span class="co">#&gt; Input file: /home/runner/work/eplusr/eplusr/vignettes/RefBldgLargeOfficeNew2004_ChicagoV880.idf</span>
<span class="co">#&gt;  From  Ver: 8.8.0</span>
<span class="co">#&gt; Toward Ver: 8.9.0</span>
<span class="co">#&gt; [8.8.0 --&gt; 8.9.0] SUCCEEDED.</span>
<span class="co">#&gt; IDD v8.9.0 has not been parsed before.</span>
<span class="co">#&gt; Try to locate 'Energy+.idd' in EnergyPlus v8.9.0 installation folder '/usr/local/EnergyPlus-8-9-0'.</span>
<span class="co">#&gt; Failed to locate 'Energy+.idd' because EnergyPlus v8.9.0 is not available.</span>
<span class="co">#&gt; Try to locate 'V8-9-0-Energy+.idd' in EnergyPlus v9.2.0 IDFVersionUpdater folder '/usr/local/EnergyPlus-9-2-0/PreProcess/IDFVersionUpdater'. --&gt; Succeeded</span>
<span class="co">#&gt; IDD file found: '/usr/local/EnergyPlus-9-2-0/PreProcess/IDFVersionUpdater/V8-9-0-Energy+.idd'.</span>
<span class="co">#&gt; Start parsing...</span>
<span class="co">#&gt; Parsing completed.</span>
<span class="co">#&gt; Input file: /home/runner/work/eplusr/eplusr/vignettes/RefBldgLargeOfficeNew2004_ChicagoV890.idf</span>
<span class="co">#&gt;  From  Ver: 8.9.0</span>
<span class="co">#&gt; Toward Ver: 9.0.0</span>
<span class="co">#&gt; [8.9.0 --&gt; 9.0.0] SUCCEEDED.</span>
<span class="co">#&gt; Multiple versions found for IDD v9.0: 'v9.0.1'. The last patched version v9.0.1 will be used. Please explicitly give the full version if you want to use the other versions.</span>
<span class="co">#&gt; IDD v9.0.1 has not been parsed before.</span>
<span class="co">#&gt; Try to locate 'Energy+.idd' in EnergyPlus v9.0.1 installation folder '/usr/local/EnergyPlus-9-0-1'.</span>
<span class="co">#&gt; Failed to locate 'Energy+.idd' because EnergyPlus v9.0.1 is not available.</span>
<span class="co">#&gt; Try to locate 'V9-0-0-Energy+.idd' in EnergyPlus v9.2.0 IDFVersionUpdater folder '/usr/local/EnergyPlus-9-2-0/PreProcess/IDFVersionUpdater'. --&gt; Succeeded</span>
<span class="co">#&gt; IDD file found: '/usr/local/EnergyPlus-9-2-0/PreProcess/IDFVersionUpdater/V9-0-0-Energy+.idd'.</span>
<span class="co">#&gt; Start parsing...</span>
<span class="co">#&gt; Parsing completed.</span>
<span class="co">#&gt; Input file: /home/runner/work/eplusr/eplusr/vignettes/RefBldgLargeOfficeNew2004_ChicagoV900.idf</span>
<span class="co">#&gt;  From  Ver: 9.0.1</span>
<span class="co">#&gt; Toward Ver: 9.1.0</span>
<span class="co">#&gt; [9.0.1 --&gt; 9.1.0] SUCCEEDED.</span>
<span class="co">#&gt; IDD v9.1.0 has not been parsed before.</span>
<span class="co">#&gt; Try to locate 'Energy+.idd' in EnergyPlus v9.1.0 installation folder '/usr/local/EnergyPlus-9-1-0'.</span>
<span class="co">#&gt; Failed to locate 'Energy+.idd' because EnergyPlus v9.1.0 is not available.</span>
<span class="co">#&gt; Try to locate 'V9-1-0-Energy+.idd' in EnergyPlus v9.2.0 IDFVersionUpdater folder '/usr/local/EnergyPlus-9-2-0/PreProcess/IDFVersionUpdater'. --&gt; Succeeded</span>
<span class="co">#&gt; IDD file found: '/usr/local/EnergyPlus-9-2-0/PreProcess/IDFVersionUpdater/V9-1-0-Energy+.idd'.</span>
<span class="co">#&gt; Start parsing...</span>
<span class="co">#&gt; Parsing completed.</span>
<span class="co">#&gt; Input file: /home/runner/work/eplusr/eplusr/vignettes/RefBldgLargeOfficeNew2004_ChicagoV910.idf</span>
<span class="co">#&gt;  From  Ver: 9.1.0</span>
<span class="co">#&gt; Toward Ver: 9.2.0</span>
<span class="co">#&gt; [9.1.0 --&gt; 9.2.0] SUCCEEDED.</span>
<span class="co">#&gt; IDD v9.2.0 has not been parsed before.</span>
<span class="co">#&gt; Try to locate 'Energy+.idd' in EnergyPlus v9.2.0 installation folder '/usr/local/EnergyPlus-9-2-0'.</span>
<span class="co">#&gt; IDD file found: '/usr/local/EnergyPlus-9-2-0/Energy+.idd'.</span>
<span class="co">#&gt; Start parsing...</span>
<span class="co">#&gt; Parsing completed.</span>
<span class="co">#&gt;    user  system elapsed </span>
<span class="co">#&gt;  90.514   2.018  92.201</span></code></pre></div>
</div>
<div id="introduce-transition" class="section level1">
<h1 class="hasAnchor">
<a href="#introduce-transition" class="anchor"></a>Introduce <code>transition()</code>
</h1>
<p>Having a clear mental model on how the transition works, the most cumbersome work left is to translate all those actions written in Fortran into R and write tests to make sure that the R implement should be the same as IDFVersionUpdater.</p>
<p><a href="https://hongyuanjia.github.io/eplusr/reference/transition.html"><code>transition()</code></a> is a pure R implementation of transition programs. It takes similar arguments as <code><a href="../reference/version_updater.html">version_updater()</a></code> except it has an additional argument <code>save</code> to control whether to save the resultant <code>Idf</code> objects to IDF files or not.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="op">(</span><span class="va">t_tr</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.time.html">system.time</a></span><span class="op">(</span><span class="va">trans</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/transition.html">transition</a></span><span class="op">(</span><span class="va">path</span>, <span class="fl">9.2</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt;  From  Ver: 8.2.0</span>
<span class="co">#&gt; Toward Ver: 8.3.0</span>
<span class="co">#&gt; [8.2.0 --&gt; 8.3.0] SUCCEEDED.</span>
<span class="co">#&gt;  From  Ver: 8.3.0</span>
<span class="co">#&gt; Toward Ver: 8.4.0</span>
<span class="co">#&gt; [8.3.0 --&gt; 8.4.0] SUCCEEDED.</span>
<span class="co">#&gt;  From  Ver: 8.4.0</span>
<span class="co">#&gt; Toward Ver: 8.5.0</span>
<span class="co">#&gt; [8.4.0 --&gt; 8.5.0] SUCCEEDED.</span>
<span class="co">#&gt;  From  Ver: 8.5.0</span>
<span class="co">#&gt; Toward Ver: 8.6.0</span>
<span class="co">#&gt; [8.5.0 --&gt; 8.6.0] SUCCEEDED.</span>
<span class="co">#&gt;  From  Ver: 8.6.0</span>
<span class="co">#&gt; Toward Ver: 8.7.0</span>
<span class="co">#&gt; [8.6.0 --&gt; 8.7.0] SUCCEEDED.</span>
<span class="co">#&gt;  From  Ver: 8.7.0</span>
<span class="co">#&gt; Toward Ver: 8.8.0</span>
<span class="co">#&gt; [8.7.0 --&gt; 8.8.0] SUCCEEDED.</span>
<span class="co">#&gt;  From  Ver: 8.8.0</span>
<span class="co">#&gt; Toward Ver: 8.9.0</span>
<span class="co">#&gt; [8.8.0 --&gt; 8.9.0] SUCCEEDED.</span>
<span class="co">#&gt;  From  Ver: 8.9.0</span>
<span class="co">#&gt; Toward Ver: 9.0.0</span>
<span class="co">#&gt; [8.9.0 --&gt; 9.0.0] SUCCEEDED.</span>
<span class="co">#&gt;  From  Ver: 9.0.0</span>
<span class="co">#&gt; Toward Ver: 9.1.0</span>
<span class="co">#&gt; [9.0.0 --&gt; 9.1.0] SUCCEEDED.</span>
<span class="co">#&gt;  From  Ver: 9.1.0</span>
<span class="co">#&gt; Toward Ver: 9.2.0</span>
<span class="co">#&gt; [9.1.0 --&gt; 9.2.0] SUCCEEDED.</span>
<span class="co">#&gt;    user  system elapsed </span>
<span class="co">#&gt;   5.014   0.016   5.029</span></code></pre></div>
<p>It is about 18.3 times faster.</p>
<p>Fast is always good. The most important thing is to ensure that <code><a href="../reference/transition.html">transition()</a></code> can provide reasonable results. Here we compare the results.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://generics.r-lib.org/reference/setops.html">setdiff</a></span><span class="op">(</span><span class="va">verup</span><span class="op">$</span><span class="fu">to_string</span><span class="op">(</span>format <span class="op">=</span> <span class="st">"sorted"</span><span class="op">)</span>, <span class="va">trans</span><span class="op">$</span><span class="fu">to_string</span><span class="op">(</span>format <span class="op">=</span> <span class="st">"sorted"</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; [1] "    Yes,                     !- Use Weather File Snow Indicators"</span>
<span class="co">#&gt; [2] "    ;                        !- Treat Weather as Actual"</span></code></pre></div>
<p>As we can see from below, there is only one difference between results from <code><a href="../reference/transition.html">transition()</a></code> and <code><a href="../reference/version_updater.html">version_updater()</a></code>:</p>
<ul>
<li>An empty field <code>Treat Weather as Actual</code> in <code>RunPeriod</code> exists in <code><a href="../reference/version_updater.html">version_updater()</a></code> version, but not in <code><a href="../reference/transition.html">transition()</a></code> version. This is because this field is not an required field and eplusr tried to only save minimum-necessary fields.</li>
</ul>
</div>
<div id="how-the-transition-works" class="section level1">
<h1 class="hasAnchor">
<a href="#how-the-transition-works" class="anchor"></a>How the transition works</h1>
<p>During version updates, some classes in the original IDF are removed, some classes are splitted into several classes, some fields are removed and there is no way to extract those information back. For example, from EnergyPlus v8.8 to v8.9, one single object in class <code>GroundHeatExchanger:Vertical</code> will be splitted into 4 different objects in class:</p>
<ul>
<li>
<code>GroundHeatExchanger:System</code>,</li>
<li>
<code>GroundHeatExchanger:Vertical:Properties</code>,</li>
<li><code>Site:GroundTemperature:Undisturbed:KusudaAchenbach</code></li>
<li><code>GroundHeatExchanger:ResponseFactors</code></li>
</ul>
<p>A basic transition on a single class is a combination of different transition actions. Below I will describe most typical ones together with the related transition program source code:</p>
<ul>
<li>
<p>Insert: Insert a new field. The code block below means that if input class is <code>OtherEquipment</code>, get the definition of it from IDD, fill new objects with all old field values except insert a new field #2 with value <code>"None"</code>.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode fortran"><code class="sourceCode fortran"><span id="cb4-1"><a href="#cb4-1"></a><span class="kw">CASE</span>(<span class="st">'OTHEREQUIPMENT'</span>)</span>
<span id="cb4-2"><a href="#cb4-2"></a>  nodiff <span class="kw">=</span> <span class="cn">.false.</span></span>
<span id="cb4-3"><a href="#cb4-3"></a>  <span class="kw">CALL</span> GetNewObjectDefInIDD(ObjectName,NwNumArgs,NwAorN,NwReqFld,NwObjMinFlds,NwFldNames,NwFldDefaults,NwFldUnits)</span>
<span id="cb4-4"><a href="#cb4-4"></a>  OutArgs(<span class="dv">1</span>) <span class="kw">=</span> InArgs(<span class="dv">1</span>)</span>
<span id="cb4-5"><a href="#cb4-5"></a>  OutArgs(<span class="dv">2</span>) <span class="kw">=</span> <span class="st">'None'</span></span>
<span id="cb4-6"><a href="#cb4-6"></a>  OutArgs(<span class="dv">3</span>:<span class="dv">11</span>) <span class="kw">=</span> InArgs(<span class="dv">2</span>:<span class="dv">10</span>)</span>
<span id="cb4-7"><a href="#cb4-7"></a>  CurArgs <span class="kw">=</span> CurArgs<span class="kw">+</span><span class="dv">1</span></span></code></pre></div>
</li>
<li>
<p>Reset: Replace old value with new value. The code block below means that if input class is <code>Exterior:FuelEquipment</code>, get the definition of it from IDD, fill new objects with all old field values except replace field #2 with <code>"NaturalGas"</code> if old value is <code>"Gas"</code> and <code>PropaneGas</code> if <code>LPG</code>. Conversion for other classes looks similar.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode fortran"><code class="sourceCode fortran"><span id="cb5-1"><a href="#cb5-1"></a><span class="kw">CASE</span>(<span class="st">'EXTERIOR:FUELEQUIPMENT'</span>)</span>
<span id="cb5-2"><a href="#cb5-2"></a>    ObjectName<span class="kw">=</span><span class="st">'Exterior:FuelEquipment'</span></span>
<span id="cb5-3"><a href="#cb5-3"></a>    <span class="kw">CALL</span> GetNewObjectDefInIDD(ObjectName,NwNumArgs,NwAorN,NwReqFld,NwObjMinFlds,NwFldNames,NwFldDefaults,NwFldUnits)</span>
<span id="cb5-4"><a href="#cb5-4"></a>    nodiff<span class="kw">=</span><span class="cn">.false.</span></span>
<span id="cb5-5"><a href="#cb5-5"></a>    OutArgs(<span class="dv">1</span>:CurArgs)<span class="kw">=</span>InArgs(<span class="dv">1</span>:CurArgs)</span>
<span id="cb5-6"><a href="#cb5-6"></a>    <span class="kw">if</span> (samestring(<span class="st">'Gas'</span>,InArgs(<span class="dv">2</span>))) <span class="kw">then</span></span>
<span id="cb5-7"><a href="#cb5-7"></a>      OutArgs(<span class="dv">2</span>)<span class="kw">=</span><span class="st">'NaturalGas'</span></span>
<span id="cb5-8"><a href="#cb5-8"></a>    <span class="kw">endif</span></span>
<span id="cb5-9"><a href="#cb5-9"></a>    <span class="kw">if</span> (samestring(<span class="st">'LPG'</span>,InArgs(<span class="dv">2</span>))) <span class="kw">then</span></span>
<span id="cb5-10"><a href="#cb5-10"></a>      OutArgs(<span class="dv">2</span>)<span class="kw">=</span><span class="st">'PropaneGas'</span></span>
<span id="cb5-11"><a href="#cb5-11"></a>    <span class="kw">endif</span></span></code></pre></div>
</li>
<li>
<p>Delete: Delete the old field, offset indices of all other field by the number of fields deleted. The code block below means that if input class is <code>HVACTemplate:System:Unitary</code>, get the definition of it from IDD, fill new objects with all old field values except removing #40.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode fortran"><code class="sourceCode fortran"><span id="cb6-1"><a href="#cb6-1"></a><span class="kw">CASE</span>(<span class="st">'HVACTEMPLATE:SYSTEM:UNITARY'</span>)</span>
<span id="cb6-2"><a href="#cb6-2"></a>    ObjectName<span class="kw">=</span><span class="st">'HVACTemplate:System:Unitary'</span></span>
<span id="cb6-3"><a href="#cb6-3"></a>    <span class="kw">CALL</span> GetNewObjectDefInIDD(ObjectName,NwNumArgs,NwAorN,NwReqFld,NwObjMinFlds,NwFldNames,NwFldDefaults,NwFldUnits)</span>
<span id="cb6-4"><a href="#cb6-4"></a>    nodiff<span class="kw">=</span><span class="cn">.false.</span></span>
<span id="cb6-5"><a href="#cb6-5"></a>    OutArgs(<span class="dv">1</span>:<span class="dv">39</span>)<span class="kw">=</span>InArgs(<span class="dv">1</span>:<span class="dv">39</span>) <span class="co">! No change</span></span>
<span id="cb6-6"><a href="#cb6-6"></a>    OutArgs(<span class="dv">40</span>:CurArgs<span class="kw">-</span><span class="dv">1</span>)<span class="kw">=</span>InArgs(<span class="dv">41</span>:CurArgs) <span class="co">! Remove Dehumidification Control Zone Name</span></span>
<span id="cb6-7"><a href="#cb6-7"></a>    CurArgs <span class="kw">=</span> CurArgs<span class="kw">-</span><span class="dv">1</span></span></code></pre></div>
</li>
<li>
<p>Offset: Set the new value of field #N as the old value of field #M. The code block means that if input class is <code>Daylight:Controls</code>, get the definition of it from IDD, add a suffix <code>_DaylCtrl</code> to old #1 as new #1, use old #1 as new #2, set new #3 as <code>"SplitFlux"</code> and use #20 as new #4.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode fortran"><code class="sourceCode fortran"><span id="cb7-1"><a href="#cb7-1"></a><span class="kw">CASE</span>(<span class="st">'DAYLIGHTING:CONTROLS'</span>)</span>
<span id="cb7-2"><a href="#cb7-2"></a>  nodiff<span class="kw">=</span><span class="cn">.false.</span></span>
<span id="cb7-3"><a href="#cb7-3"></a>  <span class="kw">CALL</span> GetNewObjectDefInIDD(ObjectName,NwNUmArgs,NwAorN,NwReqFld,NwObjMinFlds,NwFldNames,NwFldDefaults,NwFldUnits)</span>
<span id="cb7-4"><a href="#cb7-4"></a>  OutArgs(<span class="dv">1</span>) <span class="kw">=</span> <span class="fu">TRIM</span>(InArgs(<span class="dv">1</span>)) <span class="kw">//</span> <span class="st">'_DaylCtrl'</span></span>
<span id="cb7-5"><a href="#cb7-5"></a>  OutArgs(<span class="dv">2</span>) <span class="kw">=</span> InArgs(<span class="dv">1</span>)</span>
<span id="cb7-6"><a href="#cb7-6"></a>  OutArgs(<span class="dv">3</span>) <span class="kw">=</span> <span class="st">'SplitFlux'</span></span>
<span id="cb7-7"><a href="#cb7-7"></a>  OutArgs(<span class="dv">4</span>) <span class="kw">=</span> InArgs(<span class="dv">20</span>)</span>
<span id="cb7-8"><a href="#cb7-8"></a>......</span></code></pre></div>
</li>
</ul>
<p>The combinations of those four actions together builds a skeleton of an EnergyPlus transition program, together with some pre-processes and post-processes.</p>
<p>In eplusr, all IDF data are stored as data.tables. So transition means to write a function to perform the similar actions on field values stored in data.tables. <code>trans_action()</code> is designed for this purpose.</p>
<p>For example, the equivalent transition implemented in R for <code>Exterior:FuelEquipment</code> objects demonstrated in the <strong>Reset</strong> code block would be:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Insert</span>
<span class="va">dt1</span> <span class="op">&lt;-</span> <span class="fu">trans_action</span><span class="op">(</span><span class="va">idf</span>, <span class="st">"OtherEquipment"</span>, insert <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="fl">2L</span>, <span class="st">"None"</span><span class="op">)</span><span class="op">)</span>

<span class="co"># Reset</span>
<span class="va">dt2</span> <span class="op">&lt;-</span> <span class="fu">trans_action</span><span class="op">(</span><span class="va">idf</span>, <span class="st">"Exterior:FuelEquipment"</span>,
    reset <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="fl">2L</span>, <span class="st">"Gas"</span>, <span class="st">"NaturalGas"</span><span class="op">)</span>,
    reset <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="fl">2L</span>, <span class="st">"LPG"</span>, <span class="st">"PropaneGas"</span><span class="op">)</span>
<span class="op">)</span>

<span class="co"># Delete</span>
<span class="va">dt3</span> <span class="op">&lt;-</span> <span class="fu">trans_action</span><span class="op">(</span><span class="va">idf</span>, <span class="st">"HVACTemplate:System:Unitary"</span>, delete <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="fl">40L</span><span class="op">)</span><span class="op">)</span>

<span class="co"># Offset</span>
<span class="va">dt4</span> <span class="op">&lt;-</span> <span class="fu">trans_action</span><span class="op">(</span><span class="va">idf</span>, <span class="st">"Daylighting:Controls"</span>,
    offset <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="fl">20L</span>, <span class="fl">4L</span><span class="op">)</span>,
    reset <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="fl">3</span>, <span class="st">"SplitFlux"</span><span class="op">)</span>
<span class="op">)</span></code></pre></div>
<p>Having the updated IDF data, we can then easily insert them to the next new version of IDF by simply doing <code>new_idf$load(dt)</code>.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by <a href="https://github.com/hongyuanjia">Hongyuan Jia</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script><script>
  docsearch({
    
    
    apiKey: '158ff4599f27d2efdd371e5200cdb538',
    indexName: 'eplusr',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script>
</body>
</html>
